<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расчет расхода топлива и планирование маршрута</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: url('https://www.transparenttextures.com/patterns/camo-rough.png'); /* Камуфляжный фон */
            background-size: cover;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #2f2f2f;
        }

        .container {
            width: 100%;
            max-width: 900px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            color: white;
        }

        h1, h2 {
            color: #f4d03f;
            text-align: center;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-top: 15px;
            color: #f4d03f;
            font-weight: bold;
        }

        input[type='number'], select, input[type='text'] {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            margin-bottom: 20px;
            display: inline-block;
            border-radius: 8px;
            border: 2px solid #ddd;
            background-color: #2d2d2d;
            color: white;
            font-size: 16px;
        }

        button {
            background-color: #3e8e41;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }

        button:hover {
            background-color: #45aaf2;
        }

        .result-box {
            background-color: #45aaf2;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .tab-links {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }

        .tab-links button {
            padding: 15px;
            background-color: #333;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            color: #f4d03f;
            width: 32%;
        }

        .tab-links button.active {
            background-color: #3e8e41;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 24px;
            }

            h2 {
                font-size: 20px;
            }

            .tab-links {
                display: block;
            }

            .tab-links button {
                width: 100%;
                margin-bottom: 10px;
            }

            input[type='number'], select, input[type='text'] {
                font-size: 14px;
                padding: 10px;
            }

            button {
                font-size: 14px;
                padding: 10px;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        
        <h1>Расчет расхода топлива и планирование маршрута</h1>

        <!-- Вкладки для переключения между разделами -->
        <div class="tab-links">
            <button class="tab-link active" data-tab="calculator">Калькулятор расхода топлива</button>
            <button class="tab-link" data-tab="routePlan">Планирование маршрута</button>
            <button class="tab-link" data-tab="addVehicle">Добавить автомобиль</button>
        </div>

        <!-- Контент вкладки "Калькулятор расхода топлива" -->
        <div id="calculator" class="tab-content active">
            <h2>Калькулятор расхода топлива</h2>
            <label for="vehicleType">Тип автомобиля:</label>
            <select id="vehicleType">
                <option value="КамАЗ-5350">КамАЗ-5350 (46 л/100 км)</option>
                <option value="КамАЗ-5511">КамАЗ-5511 (41 л/100 км)</option>
                <option value="КамАЗ-4310">КамАЗ-4310 (46 л/100 км)</option>
                <option value="КамАЗ-53949">КамАЗ-53949 (40,2 л/100 км)</option>
                <option value="Урал-4320">Урал-4320 (44,5 л/100 км)</option>
                <option value="УАЗ-3163-103">УАЗ-3163-103 (16,4 л/100 км)</option>
                <option value="УАЗ-3962">УАЗ-3962 (17,5 л/100 км)</option>
                <option value="ГАЗ-233014">ГАЗ-233014 (Тигр) (25 л/100 км)</option>
                <option value="ГАЗ-233115">ГАЗ-233115 (Тигр) (33 л/100 км)</option>
                <option value="Volkswagen 7HC Caravella">Volkswagen 7HC Caravella (10,2 л/100 км)</option>
                <option value="Титан">Титан (40,2 л/100 км)</option>
                <option value="Феникс">Феникс (40,2 л/100 км)</option>
                <option value="Урал-2-оси">Урал 2 оси (40 л/100 км)</option>
                <option value="КамАЗ-63501">КамАЗ-63501 (62 л/100 км)</option>
            </select>

            <label for="startMileage">Начальный пробег:</label>
            <input type="number" id="startMileage" required>

            <label for="endMileage">Конечный пробег:</label>
            <input type="number" id="endMileage" required>

            <label for="engineHours">Количество моточасов:</label>
            <input type="number" id="engineHours" value="0" required>

            <label for="engineFuel">Расход топлива за 1 моточас (л):</label>
            <input type="number" id="engineFuel" value="0" required>

            <label for="percentage">Процентная надбавка:</label>
            <input type="range" id="percentage" min="-50" max="50" step="5" value="0">
            <span id="percentageValue">0%</span>

            <button id="calculateBtn">Рассчитать расход топлива</button>
            <div id="result" class="result-box"></div>
        </div>

        <!-- Контент вкладки "Планирование маршрута" -->
        <div id="routePlan" class="tab-content">
            <h2>Планирование маршрута</h2>
            <label for="distance">Расстояние (км):</label>
            <input type="number" id="distance" required>

            <label for="tankVolume">Объем бака (л):</label>
            <input type="number" id="tankVolume" value="295" required>

            <label for="vehicleTypePlan">Тип автомобиля:</label>
            <select id="vehicleTypePlan">
                <option value="КамАЗ-5350">КамАЗ-5350 (46 л/100 км)</option>
                <option value="КамАЗ-5511">КамАЗ-5511 (41 л/100 км)</option>
                <option value="КамАЗ-4310">КамАЗ-4310 (46 л/100 км)</option>
                <option value="КамАЗ-53949">КамАЗ-53949 (40,2 л/100 км)</option>
                <option value="Урал-4320">Урал-4320 (44,5 л/100 км)</option>
                <option value="УАЗ-3163-103">УАЗ-3163-103 (16,4 л/100 км)</option>
                <option value="УАЗ-3962">УАЗ-3962 (17,5 л/100 км)</option>
                <option value="ГАЗ-233014">ГАЗ-233014 (Тигр) (25 л/100 км)</option>
                <option value="ГАЗ-233115">ГАЗ-233115 (Тигр) (33 л/100 км)</option>
                <option value="Volkswagen 7HC Caravella">Volkswagen 7HC Caravella (10,2 л/100 км)</option>
                <option value="Титан">Титан (40,2 л/100 км)</option>
                <option value="Феникс">Феникс (40,2 л/100 км)</option>
                <option value="Урал-2-оси">Урал 2 оси (40 л/100 км)</option>
                <option value="КамАЗ-63501">КамАЗ-63501 (62 л/100 км)</option>
            </select>

            <button id="planRouteBtn">Планирование маршрута</button>
            <h3 id="routeResult" class="result-box"></h3>
        </div>

        <!-- Контент вкладки "Добавить автомобиль" -->
        <div id="addVehicle" class="tab-content">
            <h2>Добавить новый автомобиль</h2>
            <label for="newVehicleName">Название автомобиля:</label>
            <input type="text" id="newVehicleName" required>

            <label for="newVehicleConsumption">Расход топлива (л/100 км):</label>
            <input type="number" id="newVehicleConsumption" required>

            <button id="addVehicleBtn">Добавить автомобиль</button>
        </div>

    </div>

    <script>
        // Изначальный список автомобилей с расходами
        const vehicles = {
            "КамАЗ-5350": 46,
            "КамАЗ-5511": 41,
            "КамАЗ-4310": 46,
            "КамАЗ-53949": 40.2,
            "Урал-4320": 44.5,
            "УАЗ-3163-103": 16.4,
            "УАЗ-3962": 17.5,
            "ГАЗ-233014": 25,
            "ГАЗ-233115": 33,
            "Volkswagen 7HC Caravella": 10.2,
            "Титан": 40.2,
            "Феникс": 40.2,
            "Урал-2-оси": 40,
            "КамАЗ-63501": 62
        };

        // Переключение вкладок
        document.querySelectorAll('.tab-link').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-link').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                const tabId = button.getAttribute('data-tab');
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Обновляем отображение процента при изменении ползунка
        document.getElementById('percentage').addEventListener('input', function() {
            document.getElementById('percentageValue').innerText = this.value + "%";
        });

        // Функция для расчета расхода топлива
        function calculateFuelConsumption(startMileage, endMileage, engineHours, engineFuel, vehicleType, percentage) {
            const mileage = endMileage - startMileage;

            const baseFuelConsumption = mileage * (vehicles[vehicleType] / 100);
            const engineHoursFuel = engineHours * engineFuel;

            let totalFuelConsumption = baseFuelConsumption + (baseFuelConsumption * (percentage / 100)) + engineHoursFuel;

            // Округление в большую сторону, если дробная часть >= 0.5
            if (totalFuelConsumption % 1 >= 0.5) {
                totalFuelConsumption = Math.ceil(totalFuelConsumption);
            } else {
                totalFuelConsumption = Math.floor(totalFuelConsumption);
            }

            return { totalFuelConsumption, mileage };
        }

        // Обработчик расчета расхода топлива
        document.getElementById('calculateBtn').addEventListener('click', () => {
            const startMileage = parseFloat(document.getElementById('startMileage').value);
            const endMileage = parseFloat(document.getElementById('endMileage').value);
            const engineHours = parseFloat(document.getElementById('engineHours').value);
            const engineFuel = parseFloat(document.getElementById('engineFuel').value);
            const vehicleType = document.getElementById('vehicleType').value;
            const percentage = parseFloat(document.getElementById('percentage').value);

            const result = calculateFuelConsumption(startMileage, endMileage, engineHours, engineFuel, vehicleType, percentage);

            document.getElementById('result').innerText = `Общий расход топлива составит ${result.totalFuelConsumption} литров на ${result.mileage} км.`;
        });

        // Функция для добавления нового автомобиля
        document.getElementById('addVehicleBtn').addEventListener('click', () => {
            const newVehicleName = document.getElementById('newVehicleName').value;
            const newVehicleConsumption = parseFloat(document.getElementById('newVehicleConsumption').value);

            if (newVehicleName && !isNaN(newVehicleConsumption)) {
                vehicles[newVehicleName] = newVehicleConsumption;

                // Обновляем выпадающий список
                const option = document.createElement('option');
                option.value = newVehicleName;
                option.textContent = `${newVehicleName} (${newVehicleConsumption} л/100 км)`;

                // Добавляем новый автомобиль в оба выпадающих списка
                document.getElementById('vehicleType').appendChild(option);
                document.getElementById('vehicleTypePlan').appendChild(option.cloneNode(true));

                alert("Автомобиль успешно добавлен!");
            } else {
                alert("Пожалуйста, заполните все поля правильно!");
            }
        });

        // Расчет планирования маршрута
        document.getElementById('planRouteBtn').addEventListener('click', () => {
            const distance = parseFloat(document.getElementById('distance').value);
            const vehicleType = document.getElementById('vehicleTypePlan').value;
            const tankVolume = parseFloat(document.getElementById('tankVolume').value);

            const fuelPer100Km = vehicles[vehicleType];
            const totalFuelRequired = (distance / 100) * fuelPer100Km;

            const roundedFuelRequired = totalFuelRequired % 1 >= 0.5 ? Math.ceil(totalFuelRequired) : Math.floor(totalFuelRequired);
            const refuelsRequired = totalFuelRequired / tankVolume;
            const roundedRefuelsRequired = refuelsRequired % 1 >= 0.5 ? Math.ceil(refuelsRequired) : Math.floor(refuelsRequired);

            document.getElementById('routeResult').innerText = `Для поездки на ${distance} км потребуется ${roundedFuelRequired} литров топлива. Это означает, что вам потребуется заправиться ${roundedRefuelsRequired} раз(а).`;
        });

    </script>

</body>
</html>
